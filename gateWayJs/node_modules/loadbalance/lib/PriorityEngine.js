var AbstractEngine = require('./AbstractEngine')
var inherits = require('util').inherits
var Random = require('random-js')
var debug = require('./debug')('PriorityEngine')

module.exports = PriorityEngine

/**
 *	@param {Array} pool - objects to pick from
 *	@param {int}	seed - an optional seed that will be used to recreate a random sequence of selections
 */
function PriorityEngine(pool) {
	if (!(this instanceof PriorityEngine)) return new PriorityEngine(pool, seed)
	
	AbstractEngine.call(this, pool)

	this._engine = new FastPriorityQueue(compareFunction)
}

inherits(PriorityEngine, AbstractEngine)

PriorityEngine.prototype.pick = function() {
	return this._engine.poll()
}

function compareFunction(a, b) {
	return a.weight - b.weight
}